# Android 进程间通信机制

[TOC]

Android 是基于 Linux 内核的，在 Linux 中，出于安全考虑，不同进程间不能操作对方数据，这叫做“进程隔离”。操作系统为每个进程提供了虚拟内存空间，每个进程可操作的空间都是连续的。只有操作系统才有权限操作物理空间。

用户进程运行在用户空间，没有物理内存和设备的操作权限。系统进程运行在内核空间，拥有全部权限。如果用户进程需要其他高级权限，需要通过“系统调用”，间接通过内核函数实现。

## Linux 进程间通信方式

- 管道 Pipe：在内存中创建一个共享文件，利用共享文件传递信息。该共享文件并不是文件系统，只存在于内存中；
- 信号 Signal：异步通信。信号在用户空间和内核空间之间交互，内核可利用信号来通知用户空间的进程发生哪些系统事件。不适用于信号交换，适用于过程中断控制；
- 信号量 Semaphore：控制多个进程对共享资源的访问。主要是进程间以及同一进程不同线程之间的同步手段；
- 消息队列 MessageQueue：存放在内存中并由消息对了标识符标识，允许一个或多个进程对它进行读写消息。信息会复制两次，不适用于频繁或信息量大的通信；
- 共享内存 Shared Memory：直接读写内核的一块内存空间。不需要进行数据拷贝；
- Socket：一对多并发实时通信，繁琐，通过网络传输；
- 文件共享：不能即时通信，不适合高并发；
- 内存映射 Memory Map：内存映射是由一个文件到一块内存的映射，在此之后进程操作文件，就像操作进程空间里的内存地址一样。

## Android 进程间通信方式

AIDL：一对多并发实时通信，需要处理好线程同步；
Messenger：低并发的一对多进程间通信，只能传递 Bundle 支持的数据类型；
ContentProvider：一对多进程间数据共享；
Binder：高效简单、安全、CS 架构。

### Binder

#### Binder 实践

#### Binder 原理

[深入理解Android进程间通信机制](https://juejin.cn/post/6876046258406948878#heading-21)
[Android进程间通信](https://github.com/CharonChui/AndroidNote/blob/master/OperatingSystem/AndroidKernal/1.Android%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1.md)